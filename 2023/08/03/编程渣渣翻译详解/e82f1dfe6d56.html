<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" name="viewport"><meta name="description" content="编程渣渣翻译详解"><meta name="hexo-theme-A4" content="v1.7.0"><link rel="alternate icon" type="image/webp" href="/img/favicon.webp"><title>BHK |</title><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/reset.css"><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/markdown.css"><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/fonts.css"><link rel="stylesheet" href="/css/ui.css"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BHK" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="BHK" type="application/rss+xml"></head><body><div class="paper"><div class="shadow-drop-2-bottom paper-main"><div class="header"><div class="header-container"><img style="width:56px;height:auto" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"><div class="header-content"><a class="logo" href="/">BHK</a> <span class="description"></span></div></div><ul class="nav"><li><a href="/">首页</a></li><li><a href="/list/">文章</a></li><li><a href="/tags/">标签</a></li><li><a href="/categories/">分类</a></li><li><a href="/about/">关于</a></li></ul></div><div class="post-main"><div class="post-main-title">编程渣渣翻译详解</div><div class="post-md"><ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#handle"><span class="post-toc-text">Handle</span></a></li></ol><h3 id="handle"><a class="markdownIt-Anchor" href="#handle"></a> Handle</h3><p>句柄的英文是 handle。在英文中，有操作、处理、控制之类的意义。作为一个名词时，是指某个中间媒介，通过这个中间媒介可控制、操作某样东西。</p><p>这样说有点抽象，举个例子。door handle 是指门把手，通过门把手可以去控制门，但 door handle 并非 door 本身，只是一个中间媒介。又比如 knife handle 是刀柄，通过刀柄可以使用刀。</p><p>跟 door handle 类似，我们可以用 file handle 去操作 file, 但 file handle 并非 file 本身。这个 file handle 就被翻译成文件句柄，同理还有各种资源句柄。</p><p>计算机领域很多英文词，直接从日常词中引申而来。比如 fork，日常用词就是个叉子，在 unix 中引申成创建新进程（进程分叉了）。socket 日常用词是插座（连起来用于通电），引申成联网的标记信息（连起来用于通信）。英文是很日常，很容易理解的词，有时翻译成中文反而难以理解了。</p><hr><p>在 Windows 中，句柄是一种<strong>整数值</strong>，用于标识和访问系统对象或资源，如窗口、文件、设备等。<br>句柄充当了对象的唯一标识符，通过句柄可以对对象进行操作和管理。</p><p>Linux 中，句柄通常称为文件描述符（File Descriptor），它是一个<strong>非负整数</strong>，用于标识打开的文件、设备、管道等。</p><p>Linux将所有的I/O操作都抽象为文件，并使用文件描述符来引用和操作这些文件。</p><p>广义来说，指针也是某种 handle，可以操作对象。但实际语境中，指针跟句柄是有区别的。初次接触到 handle (或者 id)，很多人会有迷惑，为什么要用 handle，而不直接用指针呢？</p><ol><li><p>指针作用太强，可做的事情太多。可做的事情越多，就会越危险。接口设计中，功能刚刚好就够了，并非越多权限越好的。</p></li><li><p>handle 通常只是个整数，实现被隐藏起来，假如直接暴露了指针，也就暴露了指针类型（有时也可以暴露 void* 指针作为某种 handle）。用户看到越多细节，其代码就越有可能依赖这些细节。将来情况有变，但又要兼容用户代码，库内部改起来就更麻烦。</p></li><li><p>资源在内部管理，通过 handle 作为中间层，可以有效判断 handle 是否合法，也可以通过权限检查防止某种危险操作。</p></li><li><p>handle 通常只是个整数，所有的语言都有整数这种类型，但并非所有语言都有指针。接口只出现整数，方便同一实现绑定到各种语言。</p></li></ol><p>句柄的引入主要是为了解决以下几个问题：</p><ol><li><p><strong>资源标识</strong>：操作系统中存在各种类型的资源，如窗口、文件、设备等。为了标识和引用这些资源，需要一种统一的方式。句柄提供了一个唯一的标识符，可以用于识别特定类型的资源。</p></li><li><p><strong>封装和抽象</strong>：句柄将底层资源的具体实现进行了封装和抽象，提供了一种更高层次的接口供应用程序使用。这样，应用程序不需要了解资源的内部细节和底层实现，只需要通过句柄进行操作。</p></li><li><p><strong>安全性和隔离</strong>：句柄可以充当一种权限验证的机制，通过句柄来访问资源可以进行权限检查，从而保证了资源的安全性。此外，句柄还可以实现资源的隔离，不同句柄之间的资源操作互不影响。</p></li><li><p><strong>跨平台和兼容性</strong>：不同的操作系统和平台有各自的资源管理方式和实现，句柄提供了一种统一的方式来操作不同平台上的资源。这样，应用程序可以在不同的操作系统上运行，并使用相同的句柄接口来访问资源。</p></li></ol><p>参考： <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/27656256/answer/943130123">https://www.zhihu.com/question/27656256/answer/943130123</a></p></div><div class="post-meta"><i><span>2023-08-03</span> <span>该篇文章被 linkfo</span> <span>打上标签: <a href="/tags/other/">other </a></span><span>归为分类: <a href="/categories/other/">other</a></span></i></div></div><div class="footer"><span>© 2016-2023 China</span></div><div class="footer-last"><span></span> <span class="footer-last-span-right"><i>本站由<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>驱动｜使用<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>主题</i></span></div><link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/a11y-dark.min.css"><script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlight.min.js"></script><script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlightjs-line-numbers.js"></script><script>hljs.initHighlightingOnLoad(),hljs.initLineNumbersOnLoad()</script></div></div></body></html>